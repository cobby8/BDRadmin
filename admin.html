 (cd "$(git rev-parse --show-toplevel)" && git apply --3way <<'EOF' 
diff --git a/admin.html b/admin.html
index f39637f3a66c539ecad820934d70d1be3149227f..1c9423ff83a4a59915a42e13e00f63c3074a9000 100644
--- a/admin.html
+++ b/admin.html
@@ -373,60 +373,59 @@ function jerseySVG(hex,label){ const color=(/^[#][0-9a-f]{6}$/i).test(hex||'')?h
 function normalizeTeamRow(r){
   const region=[r.province||'', r.city||''].join(' ').trim();
   return {
     teamId:r.teamId||'', tourId:r.tourId||'', tourName:r.tourName||'',
     region, teamName:r.teamNameKo||r.teamName||'', managerName:r.managerName||'',
     managerPhone:phonePretty(r.managerPhone||''), category:r.category||'',
     division:r.division||'', homeHex:(r.uniformHome||'').toLowerCase(),
     awayHex:(r.uniformAway||'').toLowerCase(), createdAt:r.createdAt||'', editCode:r.editCode||''
   };
 }
 function rowTeam(v){
   const openBtn = `<a href="#" class="btn primary open-view" data-id="${v.teamId}" title="TeamView(새 탭)">열기</a>`;
   return `<tr>
     <td class="ellipsis" title="${v.tourName||''}">${v.tourName||'-'}</td>
     <td class="ellipsis" title="${v.region||''}">${v.region||'-'}</td>
     <td><div class="ellipsis" title="${v.teamName||''}"><b>${v.teamName||''}</b></div><div class="muted ellipsis" title="${(v.managerName||'')+' · '+(v.managerPhone||'')}">${v.managerName||''} · ${v.managerPhone||''}</div></td>
     <td class="ellipsis">${v.category||''} · ${v.division||''}</td>
     <td><div class="jersey">${jerseySVG(v.homeHex,'HOME')}${jerseySVG(v.awayHex,'AWAY')}</div></td>
     <td class="ellipsis">${fmtDate(v.createdAt)}</td>
     <td style="text-align:right">${openBtn}</td>
   </tr>`;
 }
 async function loadTeams(){
   const tourId=($('#tourFilter').value||'').trim();
   const j=await getJSON(apiUrl('teams', tourId?{tourId}:{}) );
-  let rows=Array.isArray(j.rows)?j.rows:[];
+  let rows=(Array.isArray(j.rows)?j.rows:[]).map(normalizeTeamRow);
   if(tourId) rows=rows.filter(r=>String(r.tourId||'').trim()===tourId);
   const q=($('#searchText').value||'').trim().toLowerCase();
   if(q){
-    rows=rows.filter(r=>{
-      const v=normalizeTeamRow(r);
-      return [v.tourName,v.region,v.teamName,v.managerName,v.managerPhone,v.category,v.division].join(' ').toLowerCase().includes(q);
-    });
+    rows=rows.filter(r=>[
+      r.tourName,r.region,r.teamName,r.managerName,r.managerPhone,r.category,r.division
+    ].join(' ').toLowerCase().includes(q));
   }
-  $('#teamsTbody').innerHTML=rows.map(r=>rowTeam(normalizeTeamRow(r))).join('') || `<tr><td colspan="7" class="muted">데이터 없음</td></tr>`;
+  $('#teamsTbody').innerHTML=rows.map(rowTeam).join('') || `<tr><td colspan="7" class="muted">데이터 없음</td></tr>`;
 }
 document.getElementById('teamsTbody').addEventListener('click', (e)=>{
   const open=e.target.closest('.open-view'); if(open){ e.preventDefault(); const id=open.dataset.id||''; if(!id) return; const url=`${VIEWER_BASE}?teamId=${encodeURIComponent(id)}`; window.open(url,'_blank','noopener'); }
 });
 
 /* ========= 상태/잠금 ========= */
 let DIV_STATE=[];
 let FORM_LOCKED=true, DIRTY=false;
 function setLocked(locked){
   FORM_LOCKED = locked;
 
   const area = $('#formArea');
   if (locked) area.classList.add('locked'); else area.classList.remove('locked');
 
   document.querySelectorAll('[data-editable]').forEach(e => e.disabled = locked);
 
   const admin = $('#adminCode');
   if (locked) { admin.setAttribute('readonly', ''); }
   else { admin.addEventListener('focus', () => admin.removeAttribute('readonly'), { once: true }); }
 
   $('#saveTourBtn').disabled   = locked;
   $('#deleteTourBtn').disabled = locked || !CURRENT_TOUR_ID;
   $('#addDivSetBtn').disabled  = locked;
   $('#addPlaceBtn').disabled   = locked;
   $('#clearAllDivBtn').disabled = locked || DIV_STATE.length === 0;
 
EOF
)
